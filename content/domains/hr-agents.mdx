---
title: "HR Agents: Building Wisq Harper Model"
description: "Build AI agents for HR operations, employee support, and people analytics"
estimatedMinutes: 45
---

# HR AI Agents

## Real-World Example: Wisq Harper

Harper is the world's first AI HR generalist, handling 80% of routine HR queries autonomously.

**Performance Metrics**:
- **94% accuracy** on SHRM-CP certification exam
- **12x faster** than certified HR professionals
- **80% automation** of tier-0 HR work
- **95% cost reduction** on routine queries
- **24/7/365** availability

---

## Architecture

```typescript
interface HRAgent {
  // Domain expertise
  training: {
    certifications: ['SHRM-CP', 'PHR curriculum'],
    employmentLaw: ['FMLA', 'ADA', 'Title VII', 'State labor laws'],
    policies: 'Company handbook + benefits documentation',
    bestPractices: 'HR case studies + industry benchmarks'
  },

  // RAG knowledge base
  knowledge: {
    sources: [
      'Employee handbook (updated quarterly)',
      'Benefits documentation',
      'HR policy library',
      'Past HR tickets (anonymized)',
      'Employment law summaries by state'
    ],
    vectorDB: {
      provider: 'Pinecone',
      metadata: ['policy_type', 'department', 'effective_date', 'state'],
      retrieval: 'Hybrid search + reranking'
    }
  },

  // HR-specific tools
  tools: [
    {
      name: 'query_employee_handbook',
      description: 'Search company policies',
      implementation: async (query: string, filters?: any) => {
        return await vectorDB.query({
          namespace: 'employee_handbook',
          vector: await embed(query),
          filter: { status: 'active', ...filters },
          topK: 5
        })
      }
    },
    {
      name: 'check_pto_balance',
      description: 'Get PTO/vacation balance from HCM',
      implementation: async (employeeId: string) => {
        const balance = await workday.getTimeOffBalance(employeeId)
        return {
          ptoRemaining: balance.pto,
          sickRemaining: balance.sick,
          accrualRate: balance.accrualRate
        }
      }
    },
    {
      name: 'create_hr_ticket',
      description: 'Escalate to human HR team',
      implementation: async (issue: HRTicket) => {
        const specialist = await routeToSpecialist(issue.category)
        return await zendesk.tickets.create({
          subject: issue.summary,
          description: issue.details,
          priority: issue.priority,
          assignee: specialist.id
        })
      }
    },
    {
      name: 'check_compliance',
      description: 'Verify action complies with employment law',
      implementation: async (action: string, state: string) => {
        const laws = await legalDB.getStateLaws(state)
        const violations = await checkViolations(action, laws)
        return {
          compliant: violations.length === 0,
          violations: violations
        }
      }
    }
  ],

  // Compliance guardrails
  compliance: {
    dataAccess: {
      allowed: ['name', 'department', 'manager', 'pto_balance', 'benefits'],
      forbidden: ['salary', 'ssn', 'performance_reviews', 'medical_info'],
      auditLog: true
    },

    escalationTriggers: [
      'discrimination or harassment mentioned',
      'termination or layoff questions',
      'medical accommodation requests',
      'workplace safety concerns',
      'c-level or executive inquiries',
      'legal questions about compliance'
    ],

    responseConstraints: {
      maxConfidence: 0.8, // Never 100% certain on legal matters
      requireCitation: true, // Must cite policy or law
      disclaimer: 'For complex issues, please consult human HR'
    }
  },

  // System integrations
  integrations: {
    hcm: 'Workday API',
    ticketing: 'Zendesk',
    chat: ['Slack', 'Microsoft Teams'],
    email: 'Gmail/Outlook',
    sso: 'Okta'
  }
}
```

---

## Example Conversations

### Simple Query (No Escalation)

```typescript
{
  employee: "How many PTO days do I have left?",

  harper: {
    reasoning: "Simple data lookup, no compliance risk",
    action: "check_pto_balance",

    response: `You have 12 PTO days remaining for 2025.

    Your PTO balance:
    - Remaining: 12 days
    - Accrued: 1.25 days/month
    - Next accrual: Feb 1 (1.25 days)

    You can view your full balance in Workday under Time Off â†’ My Balances.`,

    confidence: 1.0,
    citation: "Workday HCM System",
    escalated: false
  }
}
```

### Complex Query (Escalation Required)

```typescript
{
  employee: "Can I take FMLA leave for my father's surgery?",

  harper: {
    reasoning: "Legal question about FMLA, requires human HR review",
    actions: ["query_employee_handbook", "create_hr_ticket"],

    response: `FMLA generally covers care for a parent with a serious health condition.

    **According to our Employee Handbook (Section 4.2, FMLA Policy)**:
    âœ“ You may be eligible for up to 12 weeks of unpaid leave
    âœ“ Requirements: Worked here 12+ months AND 1,250+ hours
    âœ“ Medical certification required from doctor

    **Next Steps**:
    Because FMLA involves legal requirements and your specific eligibility,
    I've created ticket #HR-2847 for our HR team to review your situation
    and guide you through the application process.

    **Your assigned HR specialist**: Sarah Johnson (HR Manager)
    **Expected response time**: Within 24 hours

    You'll receive an email with next steps shortly.`,

    confidence: 0.7,
    citations: [
      "Employee Handbook Section 4.2",
      "29 U.S.C. Â§2612 (Family and Medical Leave Act)"
    ],
    escalated: true,
    ticketId: "HR-2847",
    assignedTo: "Sarah Johnson"
  }
}
```

---

## Implementation Guide

### Step 1: Build Knowledge Base

```bash
# Collect HR documents
/knowledge_base/
  â”œâ”€â”€ employee_handbook.pdf
  â”œâ”€â”€ benefits_guide.pdf
  â”œâ”€â”€ pto_policy.md
  â”œâ”€â”€ code_of_conduct.pdf
  â”œâ”€â”€ state_labor_laws/
  â”‚   â”œâ”€â”€ california.md
  â”‚   â”œâ”€â”€ new_york.md
  â”‚   â””â”€â”€ texas.md
  â””â”€â”€ hr_faqs.json

# Process and embed
npx tsx scripts/embed-hr-documents.ts
```

```typescript
// embed-hr-documents.ts
import { embed } from '@/lib/embeddings'
import { pinecone } from '@/lib/vector-db'

async function embedHRDocuments() {
  const documents = await loadDocuments('./knowledge_base')

  for (const doc of documents) {
    const chunks = chunkDocument(doc, {
      size: 512,
      overlap: 50,
      preserveSections: true
    })

    for (const chunk of chunks) {
      const embedding = await embed(chunk.text)

      await pinecone.upsert({
        namespace: 'hr_knowledge',
        vectors: [{
          id: chunk.id,
          values: embedding,
          metadata: {
            text: chunk.text,
            source: doc.filename,
            policyType: chunk.policyType,
            effectiveDate: chunk.effectiveDate,
            state: chunk.state // For state-specific laws
          }
        }]
      })
    }
  }
}
```

### Step 2: Configure Compliance Rules

```typescript
// lib/hr-compliance.ts
export class HRComplianceLayer {
  // Data access control
  async checkDataAccess(userId: string, dataType: string): Promise<boolean> {
    const allowedData = ['name', 'department', 'pto_balance']
    const forbiddenData = ['salary', 'ssn', 'medical_info']

    if (forbiddenData.includes(dataType)) {
      await this.auditLog({
        userId,
        action: 'data_access_denied',
        dataType,
        reason: 'forbidden_data_type'
      })
      throw new Error(`Access denied: Cannot access ${dataType}`)
    }

    return allowedData.includes(dataType)
  }

  // Escalation detection
  shouldEscalate(message: string): boolean {
    const triggers = [
      /discrimination|harassment|hostile work environment/i,
      /terminate|termination|fire|firing|layoff/i,
      /disability|accommodation|ada/i,
      /unsafe|danger|injury|osha/i,
      /ceo|cto|executive|c-level/i
    ]

    return triggers.some(trigger => trigger.test(message))
  }

  // Response validation
  async validateResponse(response: string): Promise<void> {
    const prohibited = [
      'you are fired',
      'we will terminate',
      'this is legal advice',
      'you should sue'
    ]

    for (const phrase of prohibited) {
      if (response.toLowerCase().includes(phrase)) {
        throw new Error(`Prohibited phrase detected: "${phrase}"`)
      }
    }

    // Require citation for policy questions
    if (!response.includes('According to') && !response.includes('Source:')) {
      console.warn('Response lacks citation')
    }
  }
}
```

### Step 3: Integrate with HCM System

```typescript
// lib/workday-integration.ts
export class WorkdayIntegration {
  async getPTOBalance(employeeId: string) {
    const response = await fetch(`${WORKDAY_API}/employees/${employeeId}/time_off`, {
      headers: {
        'Authorization': `Bearer ${WORKDAY_API_KEY}`,
        'Content-Type': 'application/json'
      }
    })

    const data = await response.json()

    return {
      pto: data.ptoBalance,
      sick: data.sickBalance,
      accrualRate: data.accrualRatePerMonth,
      nextAccrual: data.nextAccrualDate
    }
  }

  async getEmployeeInfo(employeeId: string) {
    // Only access allowed fields
    const allowed = ['name', 'department', 'manager', 'hireDate']

    const response = await fetch(`${WORKDAY_API}/employees/${employeeId}`, {
      headers: { 'Authorization': `Bearer ${WORKDAY_API_KEY}` }
    })

    const data = await response.json()

    // Filter to only allowed fields
    return Object.fromEntries(
      Object.entries(data).filter(([key]) => allowed.includes(key))
    )
  }
}
```

---

## Deployment Checklist

- [ ] Knowledge base complete (handbook, policies, laws)
- [ ] HCM integration tested (Workday, BambooHR, etc)
- [ ] Ticketing system connected (Zendesk, ServiceNow)
- [ ] Compliance guardrails active
- [ ] Data access controls verified
- [ ] Escalation triggers configured
- [ ] Audit logging enabled
- [ ] Human HR team trained on agent handoffs
- [ ] Employee rollout communication sent

---

## Metrics to Track

```typescript
const hrAgentMetrics = {
  // Performance
  queryVolume: 'Queries handled per day',
  resolutionRate: '% queries resolved without escalation',
  averageResponseTime: 'Seconds to first response',
  accuracy: '% of answers validated as correct',

  // Cost
  costPerQuery: 'AI cost vs human HR cost',
  monthlySavings: 'Estimated HR time saved',

  // Quality
  employeeSatisfaction: 'Thumbs up/down on responses',
  escalationRate: '% of queries escalated to human HR',
  falseEscalations: '% escalations that weren\'t needed',

  // Compliance
  auditLog: 'All data access logged',
  violations: 'Data access violations caught',
  policyUpdates: 'Knowledge base freshness'
}
```

---

## Resources

- **SHRM Certification**: [shrm.org/certification](https://www.shrm.org/certification)
- **Employment Law**: US Department of Labor guides
- **Workday API**: [workday.com/api](https://www.workday.com/api)
- **HR Best Practices**: SHRM Knowledge Base

---

## Next Steps

1. Audit your HR knowledge (what documents do you have?)
2. Choose HCM system for integration
3. Build knowledge base with RAG
4. Implement compliance layer
5. Test with HR team before employee rollout
6. Monitor and iterate based on feedback

HR agents like Harper show 95% cost reduction on routine work. Start with PTO/benefits questions, then expand to complex use cases. ðŸš€
