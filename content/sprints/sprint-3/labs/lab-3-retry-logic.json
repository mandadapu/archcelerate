{
  "id": "lab-3-retry-logic",
  "title": "Implement Retry Logic",
  "description": "Build robust retry mechanisms with exponential backoff",
  "difficulty": "advanced",
  "estimatedMinutes": 45,
  "language": "javascript",
  "starterCode": "/**\n * Retry a function with exponential backoff\n * @param {Function} fn - Function to retry\n * @param {number} maxRetries - Maximum retry attempts\n * @param {number} baseDelay - Base delay in ms\n * @returns Result of function or throws error\n */\nasync function retryWithBackoff(fn, maxRetries = 3, baseDelay = 1000) {\n  // Your code here\n  return null\n}\n\n/**\n * Sleep for specified milliseconds\n */\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n",
  "instructions": "Implement `retryWithBackoff()` that:\n1. Tries to execute fn()\n2. If it fails, wait baseDelay * (2 ^ attempt) ms\n3. Retry up to maxRetries times\n4. If all retries fail, throw the last error\n5. If succeeds, return the result\n\nExponential backoff: 1s, 2s, 4s, 8s, etc.",
  "testCases": [
    {
      "input": "retryWithBackoff(() => Promise.resolve(42), 3, 100)",
      "expectedOutput": "42",
      "description": "Returns result on success"
    },
    {
      "input": "let count = 0; retryWithBackoff(() => { count++; if (count < 2) throw new Error(); return 'ok'; }, 3, 10)",
      "expectedOutput": "ok",
      "description": "Retries on failure then succeeds"
    }
  ],
  "hints": [
    "Use a for loop for retry attempts",
    "Calculate delay: baseDelay * Math.pow(2, attempt)",
    "Use try-catch to handle errors",
    "await sleep(delay) between retries"
  ]
}
