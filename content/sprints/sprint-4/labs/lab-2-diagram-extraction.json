{
  "id": "lab-2-diagram-extraction",
  "title": "Extract Data from Diagrams",
  "description": "Extract structured information from charts, diagrams, and infographics",
  "difficulty": "intermediate",
  "estimatedMinutes": 30,
  "language": "javascript",
  "starterCode": "/**\n * Extract structured data from a diagram\n * @param {string} imageBase64 - Base64 encoded diagram image\n * @param {string} dataType - Type of data to extract ('chart', 'flowchart', 'table')\n * @returns Structured data object\n */\nasync function extractDiagramData(imageBase64, dataType) {\n  // Your code here\n  return null\n}\n\n/**\n * Parse Claude's response into structured format\n * @param {string} response - Claude API response\n * @returns Parsed data object\n */\nfunction parseStructuredData(response) {\n  // Your code here\n  return null\n}\n",
  "instructions": "Build diagram data extraction:\n1. `extractDiagramData(imageBase64, dataType)`: Extract data from visual diagrams\n   - Request structured output (JSON format)\n   - Specify what data format to extract\n   - Handle different diagram types\n\n2. `parseStructuredData(response)`: Parse Claude's text response\n   - Extract JSON from response\n   - Validate data structure\n   - Return parsed object\n\nUse clear prompts like: 'Extract the data from this chart as JSON with keys: labels, values'",
  "testCases": [
    {
      "input": "typeof await extractDiagramData(mockChartImage, 'chart')",
      "expectedOutput": "object",
      "description": "Returns object for chart data"
    },
    {
      "input": "Array.isArray((await extractDiagramData(mockChartImage, 'chart')).labels)",
      "expectedOutput": "true",
      "description": "Chart data has labels array"
    },
    {
      "input": "Array.isArray((await extractDiagramData(mockChartImage, 'chart')).values)",
      "expectedOutput": "true",
      "description": "Chart data has values array"
    },
    {
      "input": "typeof parseStructuredData('{\"key\": \"value\"}')",
      "expectedOutput": "object",
      "description": "Parses JSON string to object"
    },
    {
      "input": "parseStructuredData('{\"key\": \"value\"}').key",
      "expectedOutput": "value",
      "description": "Preserves data structure"
    }
  ],
  "hints": [
    "Be explicit in prompts: 'Return ONLY valid JSON'",
    "Use JSON.parse() to convert response",
    "Wrap in try-catch for parsing errors",
    "Validate expected keys exist in parsed data"
  ]
}
