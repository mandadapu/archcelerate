{
  "id": "lab-2-architecture-diagram",
  "title": "Design System Architecture",
  "description": "Create a component architecture for your AI application",
  "difficulty": "advanced",
  "estimatedMinutes": 45,
  "language": "javascript",
  "starterCode": "/**\n * Define your system architecture\n * Return an object describing your application's architecture\n */\nfunction defineArchitecture() {\n  return {\n    layers: {\n      presentation: [],\n      application: [],\n      domain: [],\n      aiServices: [],\n      infrastructure: []\n    },\n    dataFlow: {\n      userRequest: '',\n      steps: []\n    },\n    components: [\n      {\n        name: '',\n        responsibility: '',\n        dependencies: []\n      }\n    ],\n    techStack: {\n      frontend: [],\n      backend: [],\n      ai: [],\n      database: [],\n      deployment: []\n    },\n    designDecisions: [\n      {\n        decision: '',\n        rationale: '',\n        alternatives: []\n      }\n    ]\n  }\n}\n",
  "instructions": "Design the architecture for your AI application:\n\n1. Define components in each layer:\n   - Presentation: UI components, API routes\n   - Application: Use cases, orchestrators\n   - Domain: Business logic, entities\n   - AI Services: LLM clients, prompt builders, parsers\n   - Infrastructure: Database, external services\n\n2. Describe data flow from user request to response:\n   - List each step in the flow\n   - Identify which components are involved\n\n3. Define key components with clear responsibilities\n\n4. Choose your tech stack (be specific: Next.js 14, not just React)\n\n5. Document 2-3 key design decisions (e.g., why Claude vs OpenAI)",
  "testCases": [
    {
      "input": "defineArchitecture().layers.presentation.length > 0",
      "expectedOutput": "true",
      "description": "Has presentation layer components"
    },
    {
      "input": "defineArchitecture().layers.aiServices.length > 0",
      "expectedOutput": "true",
      "description": "Has AI services layer components"
    },
    {
      "input": "defineArchitecture().dataFlow.steps.length >= 5",
      "expectedOutput": "true",
      "description": "Data flow has at least 5 steps"
    },
    {
      "input": "defineArchitecture().components.length >= 5",
      "expectedOutput": "true",
      "description": "Has at least 5 components defined"
    },
    {
      "input": "defineArchitecture().techStack.ai.length > 0",
      "expectedOutput": "true",
      "description": "Has AI tech stack specified"
    },
    {
      "input": "defineArchitecture().designDecisions.length >= 2",
      "expectedOutput": "true",
      "description": "Has at least 2 design decisions documented"
    }
  ],
  "hints": [
    "Use layered architecture: Presentation → Application → Domain → Infrastructure",
    "Keep AI services in separate layer for easy testing and swapping",
    "Each component should have single responsibility",
    "Document why you chose specific technologies (not just what)",
    "Design decisions should address tradeoffs (e.g., cost vs quality)"
  ]
}
